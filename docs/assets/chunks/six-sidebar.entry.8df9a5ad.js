import{r as u,c as a,h}from"../app.9b1de219.js";import{s as b}from"./scroll-774762d6.29c32130.js";import"./framework.2094cf97.js";import"./theme.d34f0c99.js";const v=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:block;height:100%}.sidebar__container{height:100%;overflow:auto}.sidebar__container.sidebar--open{box-shadow:var(--six-elevation-1dp)}.sidebar__container:not(.sidebar--visible){position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;pointer-events:none;visibility:hidden}.sidebar--left{color:var(--six-sidebar-color);background-color:var(--six-sidebar-background-color);transition:var(--six-transition-medium) margin-left;background-size:300vw 70%;background-position:bottom;background-repeat:no-repeat}.sidebar--right{transition:var(--six-transition-medium) margin-right}.sidebar--open.sidebar--left{margin-right:2px}.sidebar--open.sidebar--right{margin-left:2px}",c=e=>{var s;return((s=e==null?void 0:e.tagName)===null||s===void 0?void 0:s.toLowerCase())==="six-sidebar-item-group"},p=class{constructor(e){u(this,e),this.sixShow=a(this,"six-sidebar-show",7),this.sixAfterShow=a(this,"six-sidebar-after-show",7),this.sixHide=a(this,"six-sidebar-hide",7),this.sixAfterHide=a(this,"six-sidebar-after-hide",7),this.sixInitialFocus=a(this,"six-sidebar-initial-focus",7),this.willShow=!1,this.willHide=!1,this.handleTransitionEnd=s=>{const t=s.target;s.type==="transitionend"&&t.classList.contains("sidebar__container")&&this.resetTransitionVariables()},this.closeSiblingDetailsOnShow=s=>{const t=s.target;this.sidebar!=null&&b(t,this.sidebar);const n=i=>{var o;let r=t;for(;i(r)!=null;)if(r=i(r),c(r)){const l=(o=r==null?void 0:r.shadowRoot)===null||o===void 0?void 0:o.querySelector("six-details");l!=null&&(l.open=!1)}};n(i=>i==null?void 0:i.previousElementSibling),n(i=>i==null?void 0:i.nextElementSibling)},this.isVisible=!1,this.position="left",this.open=!1,this.width="16rem",this.toggled=!1}handleOpenChange(){this.open?this.show():this.hide()}componentWillLoad(){this.open&&(this.show(),this.resetTransitionVariables())}componentDidRender(){this.setupTogglableMenuItems()}disconnectedCallback(){var e;(e=this.sidebar)===null||e===void 0||e.removeEventListener("six-details-show",this.closeSiblingDetailsOnShow)}setupTogglableMenuItems(){!this.toggled||this.sidebar==null||(this.markAllMenuItemsAsSelectableEmpty(),this.sidebar.addEventListener("six-details-show",this.closeSiblingDetailsOnShow))}markAllMenuItemsAsSelectableEmpty(){var e;const s=(e=this.sidebar)===null||e===void 0?void 0:e.querySelector("slot"),t=(s==null?void 0:s.assignedElements())||[],n=[];for(;t.length>0;){const i=t.pop();if((i==null?void 0:i.shadowRoot)==null)continue;const o=i.shadowRoot.querySelectorAll("six-details");n.push(...o);const r=Array.from(i.children).filter(c);t.push(...r)}n.forEach(i=>i.selectableEmpty=!0)}async toggle(){this.willShow||this.willHide||(this.open?await this.hide():await this.show())}async show(){if(this.willShow)return;if(this.sixShow.emit().defaultPrevented){this.open=!1;return}this.willShow=!0,this.isVisible=!0,this.open=!0}async hide(){if(this.willHide)return;if(this.sixHide.emit().defaultPrevented){this.open=!0;return}this.willHide=!0,this.open=!1}async selectItemByIndex(e){if(this.sidebar==null)return;const s=this.sidebar.querySelector("slot"),t=((s==null?void 0:s.assignedElements())||[]).flatMap(n=>{var i;const o=(i=n.shadowRoot)===null||i===void 0?void 0:i.querySelector("six-details");return o==null?[]:[o]});if(e<0||e>t.length-1){console.error(`Tried to access sidebar menu item by index, but provided index out of range. Provided index: ${e}`);return}await t[e].show()}async selectItemByName(e){var s,t,n;const i=(s=this.sidebar)===null||s===void 0?void 0:s.querySelector("slot"),o=i==null?void 0:i.assignedElements();if(o==null)return;const r=o.findIndex(d=>(d==null?void 0:d.name)===e),l=(n=(t=o.at(r))===null||t===void 0?void 0:t.shadowRoot)===null||n===void 0?void 0:n.querySelector("six-details");await(l==null?void 0:l.show())}resetTransitionVariables(){this.isVisible=this.open,this.willShow=!1,this.willHide=!1,this.open?this.sixAfterShow.emit():this.sixAfterHide.emit()}render(){return h("host",{class:"six-sidebar"},h("div",{class:{sidebar__container:!0,"sidebar--visible":this.isVisible,"sidebar--open":this.open,"sidebar--left":this.position==="left","sidebar--right":this.position==="right"},style:{width:this.width,[`margin-${this.position}`]:this.open?"0":`calc(1rem - ${this.width})`},ref:e=>this.sidebar=e,"aria-hidden":this.open?"false":"true",onTransitionEnd:this.handleTransitionEnd},h("slot",null)))}static get watchers(){return{open:["handleOpenChange"]}}};p.style=v;export{p as six_sidebar};
