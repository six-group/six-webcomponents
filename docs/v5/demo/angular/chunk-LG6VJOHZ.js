import{a as h}from"./chunk-R7XVIMP2.js";import{a as f,d as x}from"./chunk-2EUF2ITM.js";import{a as l}from"./chunk-W2HL4QJA.js";import{a as g}from"./chunk-HDKLD45I.js";import{b as a}from"./chunk-7R52OV2X.js";import{c as k,d as r,f as b,g as p}from"./chunk-UHYGGA5Q.js";var w=()=>{let t=new Date;return{hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),milliseconds:t.getMilliseconds(),has24Hours:!0}},m=12,H=t=>t>m?t-m:t,y=()=>{let t=new Date,e=t.getHours();return{hours:H(e),minutes:t.getMinutes(),seconds:t.getSeconds(),milliseconds:t.getMilliseconds(),has24Hours:!1,period:e>=m?"PM":"AM"}},S=(t=!0)=>t?w():y(),d=(t,e)=>{let i=t.split(":"),s=e.split(":");return i.length===s.length},u=(t,e)=>{let i=t.split(":"),s=e.split(":");d(t,e)||console.error(`Timestring did not match expected format.
Expected format: ${e}
Received timestring: ${t}`);let n={};return i.forEach((o,C)=>{switch(s[C]){case"HH":n.hours=Number(o),n.has24Hours=!0;break;case"hh":n.hours=Number(o),n.has24Hours=!1;break;case"mm":n.minutes=Number(o);break;case"ss":n.seconds=Number(o);break;case"ms":n.milliseconds=Number(o);break;case"aa":n.period=o.toUpperCase()==="PM"?"PM":"AM"}}),n},P=(t,e)=>t==null?"":e.split(":").map(s=>{switch(s){case"HH":case"hh":return String(t.hours).padStart(2,"0");case"mm":return String(t.minutes).padStart(2,"0");case"ss":return String(t.seconds).padStart(2,"0");case"ms":return String(t.milliseconds).padStart(3,"0");case"aa":return String(t.period)}}).join(":"),T=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:border-box}.sr-only{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}:host{display:block;font-family:var(--six-font-family)}.timepicker_clear{display:inline-flex;align-items:center;font-size:inherit;color:var(--six-input-icon-color);border:none;background:none;padding:0;transition:var(--six-transition-fast) color;cursor:pointer}.timepicker_clear:hover{color:var(--six-input-icon-color-hover)}.timepicker_clear:focus{outline:none}.timepicker_clear--right{right:0;position:absolute}.timepicker_clear--left{right:35px;position:absolute}.timepicker__container{position:relative}.timepicker__popup{display:flex;justify-content:center;min-width:min-content;background-color:white;padding:0.5em;box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);user-select:none;position:absolute;z-index:var(--six-z-index-dropdown);right:0;left:0}.timepicker__popup--is-up{bottom:100%}.timepicker__popup--is-inline{position:initial;box-shadow:none;border:1px solid var(--six-color-web-rock-400)}.timepicker__separator{display:flex;align-items:center}.timepicker__item--wide{padding-left:0.5rem;padding-right:0.5rem}.input--empty .timepicker_clear{visibility:hidden}.input--hide{display:none}.prefix{cursor:pointer}.prefix--right{right:0;display:inline-flex;position:absolute;font-size:inherit;color:var(--six-input-icon-color);border:none;background:none;margin-right:var(--six-input-spacing-medium);transition:var(--six-transition-fast) color}",c=145,A=(()=>{let t=class{constructor(e){k(this,e),this.sixChange=p(this,"six-timepicker-change"),this.sixChangeDebounced=p(this,"six-timepicker-change-debounced"),this.sixClear=p(this,"six-timepicker-clear"),this.eventListeners=new g,this.format="HH:mm:ss",this.separator=":",this.value="",this.open=!1,this.inline=!1,this.readonly=!1,this.disabled=!1,this.size="medium",this.required=!1,this.errorText="",this.label="",this.invalid=!1,this.name="",this.clearable=!1,this.iconPosition="left",this.hoist=!1,this.timeout=300,this.interval=35,this.debounce=300,this.isPopupContentUp=!1,this.isDropDownContentUp=!1,this.popupValue={},this.handlePickerChange=(i,s)=>{if(i.stopPropagation(),this.popupValue==null)return;this.popupValue[s]=i.detail;let n=P(this.popupValue,this.format);this.value=n,this.sixChange.emit({changedProperty:s,value:this.popupValue,valueAsString:n})},this.handleDocumentMouseDown=i=>{if(!i.composedPath().includes(this.host)){this.closePopup();return}},this.handleClearClick=i=>{i.stopPropagation(),this.value="",this.sixClear.emit(),this.sixChange.emit({value:{},valueAsString:""})}}async resizeHandler(){this.calcIsPopupContentUp(),this.moveOpenHoistedPopup()}async scrollHandler(){this.calcIsPopupContentUp(),this.moveOpenHoistedPopup()}valueChanged(){this.updateValue()}async setFocus(e){var i;(i=this.inputElement)===null||i===void 0||i.setFocus(e)}connectedCallback(){this.eventListeners.forward("six-timepicker-change","change",this.host)}componentWillLoad(){this.updateValue(),this.inline&&(this.open=!0),this.open&&this.eventListeners.add(document,"mousedown",this.handleDocumentMouseDown)}componentDidLoad(){if(this.inputElement==null)return;let e=this.inputElement;this.eventListeners.add(this.host,"six-timepicker-change",l(i=>this.sixChangeDebounced.emit(i.detail),this.debounce)),this.eventListeners.add(e,"six-input-input",l(i=>{if(i.stopPropagation(),!d(e.value,this.format)){this.value=e.value,this.sixChange.emit({value:{},valueAsString:""});return}this.value=e.value,this.popupValue=u(e.value,this.format),this.sixChange.emit({value:this.popupValue,valueAsString:P(this.popupValue,this.format)})},this.debounce))}componentDidRender(){f(this.hoist,this.popup,this.inputElement,this.wrapper,c,e=>this.isDropDownContentUp=e)}disconnectedCallback(){this.eventListeners.removeAll()}updateValue(){(typeof this.value!="string"||!d(this.value,this.format))&&(this.value=""),this.value===""?this.defaultTime==null?this.popupValue=S(this.is24HourClock()):this.popupValue=u(this.defaultTime,this.format):this.popupValue=u(this.value,this.format)}calcIsPopupContentUp(){if(this.inputElement==null||this.wrapper==null)return;let e=this.inputElement.getBoundingClientRect(),i=this.wrapper.getBoundingClientRect(),s=Math.max(i.height,c),n=e.y>window.innerHeight/2;this.isPopupContentUp=n&&window.innerHeight<e.bottom+s}moveOpenHoistedPopup(){x(this.hoist,this.open,this.popup,this.inputElement,this.wrapper,c)}getSixTimeUnitPicker(e){return r("six-item-picker",{class:e.class,timeout:this.timeout,interval:this.interval,padded:!0,min:e.min,max:e.max,value:this.popupValue[e.propertyName],items:e.items,type:e.type||h.NUMBER,"padding-length":e.paddingLength,"onSix-item-picker-change":i=>this.handlePickerChange(i,e.propertyName)})}getHour24Picker(){if(this.is24HourClock())return this.getSixTimeUnitPicker({min:0,max:23,propertyName:"hours"})}is24HourClock(){return this.format.includes("HH")}getHour12Picker(){if(this.is12HourClock())return this.getSixTimeUnitPicker({min:0,max:11,propertyName:"hours"})}is12HourClock(){return this.format.includes("hh")}getAmPmPicker(){if(!this.is12HourClock())return;let e=["AM","PM"];return this.getSixTimeUnitPicker({items:e,type:h.CUSTOM,propertyName:"period"})}getMinutePicker(){if(this.format.includes("mm"))return this.getSixTimeUnitPicker({min:0,max:59,propertyName:"minutes"})}getSecondsPicker(){if(this.format.includes("ss"))return this.getSixTimeUnitPicker({min:0,max:59,propertyName:"seconds"})}getMillisecondsPicker(){if(this.format.includes("ms"))return this.getSixTimeUnitPicker({min:0,max:999,class:"timepicker__item--wide",paddingLength:3,propertyName:"milliseconds"})}getSeparator(){return r("div",{class:"timepicker__separator"},r("span",null,this.separator))}getContent(){let i=[this.getHour24Picker(),this.getHour12Picker(),this.getMinutePicker(),this.getSecondsPicker(),this.getMillisecondsPicker()].filter(s=>s!==void 0);return i.map((s,n)=>n===i.length-1?[s]:[s,this.getSeparator()])}openPopup(){!this.open&&!this.disabled&&(this.open=!0,this.eventListeners.add(document,"mousedown",this.handleDocumentMouseDown))}closePopup(){this.inline||(this.open=!1,this.eventListeners.remove(document,"mousedown",this.handleDocumentMouseDown))}renderClearable(){return this.clearable&&r("button",{slot:"suffix",class:{timepicker_clear:!0,"timepicker_clear--right":this.iconPosition==="left","timepicker_clear--left":this.iconPosition==="right"},type:"button",onClick:this.handleClearClick,tabindex:"-1"},r("six-icon",{size:"small"},"clear"))}renderCustomIcon(){let e=a(this.host,"custom-icon")?r("slot",{name:"custom-icon"}):r("six-icon",{size:this.size==="large"?"medium":this.size},"watch_later");return r("span",{slot:"prefix",part:"icon",class:{prefix:!0,"prefix--right":this.iconPosition==="right"}},e)}render(){return r("div",{key:"58240c7c32227225d1811fa59e9cf336aad03a4d",part:"container",ref:e=>this.wrapper=e,class:"timepicker__container"},r("six-input",{key:"1b6e9b28d997b67a933d055fa3e73e3c0751aa53",ref:e=>this.inputElement=e,part:"input",onClick:()=>this.openPopup(),value:this.value,placeholder:this.placeholder,readonly:this.readonly,disabled:this.disabled,errorTextCount:this.errorTextCount,errorText:this.errorText,invalid:this.invalid,size:this.size,name:this.name,label:this.label,required:this.required,class:{"input--empty":this.value==="","input--hide":this.inline}},this.renderCustomIcon(),this.renderClearable(),a(this.host,"label")?r("span",{slot:"label"},r("slot",{name:"label"})):null,a(this.host,"error-text")?r("span",{slot:"error-text"},r("slot",{name:"error-text"})):null),this.open&&r("div",{key:"b762116d0af1bc11d7f2cbb255b071e8fe3b52cf",ref:e=>this.popup=e,part:"popup",class:{timepicker__popup:!0,"timepicker__popup--is-up":this.placement==null?this.placement==="top":this.isPopupContentUp,"timepicker__popup--is-inline":this.inline}},...this.getContent(),this.getAmPmPicker()))}get host(){return b(this)}static get watchers(){return{value:["valueChanged"]}}};return t.style=T,t})();export{A as six_timepicker};
