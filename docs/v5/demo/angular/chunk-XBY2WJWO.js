import{a as s,b as o}from"./chunk-R7XVIMP2.js";import{a as u}from"./chunk-W2HL4QJA.js";import{a as d}from"./chunk-HDKLD45I.js";import{c,d as r,f as p,g as l}from"./chunk-ZWDV2H2C.js";var k=".item_picker__container{width:2.5em;display:flex;flex-wrap:wrap;justify-content:center}.item_picker__container:focus-visible{outline:var(--six-focus-ring);outline-offset:0}.item_picker__content{font-size:1.5rem}.item_picker__btn{cursor:pointer;width:2.5em;height:2.5em;display:flex;vertical-align:middle;align-items:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--six-color-web-rock-500)}.item_picker__btn:hover{background-color:var(--six-color-web-rock-100);border-radius:100%}.item_picker__btn:active{color:var(--six-color-web-rock-400)}.item_picker__btn--disabled{color:var(--six-color-web-rock-300);cursor:not-allowed}.item_picker__btn--disabled:hover{background-color:initial}.item_picker__btn--disabled:active{color:var(--six-color-web-rock-300)}.item_picker__btn:focus-visible{outline:var(--six-focus-ring);outline-offset:0}",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",x=[...a].flatMap(t=>[t,t.toLowerCase()]),b={alphabet:x,letterIndexes:Object.fromEntries(x.map((t,e)=>[t,e]))},I={alphabet:[...a].flatMap(t=>[t]),letterIndexes:Object.fromEntries([...a].map((t,e)=>[t,e]))},v={alphabet:[...a.toLowerCase()].flatMap(t=>[t]),letterIndexes:Object.fromEntries([...a.toLowerCase()].map((t,e)=>[t,e]))},D=t=>Object.fromEntries([...t].map((e,i)=>[e,i])),n="[SIX-ITEM-PICKER]",f=(t,e)=>t-e,_=(t,e)=>t+e,m="debounced-item-picker",T=(()=>{let t=class{constructor(e){c(this,e),this.sixChange=l(this,"six-item-picker-change"),this.sixChangeDebounced=l(this,"six-item-picker-change-debounced"),this.eventListeners=new d,this.value="",this.type=s.NUMBER,this.roundtrip=!0,this.step=1,this.padded=!1,this.paddingLength=2,this.paddingChar="0",this.paddingDirection=o.BEFORE,this.timeout=300,this.interval=35,this.debounce=300,this._items=[],this._itemIndexes={},this.handleSixItemPickerChangeDebounced=()=>{this.sixChangeDebounced.emit(this.value)}}handleValueChange(){this.setup()}debounceChanged(){this.eventListeners.removeByIdentifier(m),this.eventListeners.add(this.host,"six-item-picker-change",u(this.handleSixItemPickerChangeDebounced,this.debounce),m)}handleSetChange(){this.setup(),this.min=this._items[0],this.max=this.getLastStringItem()}componentWillLoad(){this.setup()}componentDidLoad(){this.eventListeners.add(this.host,"six-item-picker-change",u(this.handleSixItemPickerChangeDebounced,this.debounce),m)}disconnectedCallback(){this.eventListeners.removeAll()}setup(){this.isNumber()?this.setupNumberItems():this.setUpStringItems()}setupNumberItems(){var e;this.isInvalidNumber()&&(console.warn(`${n} Expected number but value is not a number: "${this.value}"`),console.info(`${n} Will set value to either minimum or if not provided to zero.`),this.value=(e=this.min)!==null&&e!==void 0?e:0)}setUpStringItems(){if(this._items=this.getStringItems(),this._itemIndexes=this.getItemIndexes(),this._items.find(i=>String(i)===String(this.value))===void 0&&(console.warn(`${n} Expected item from item set but value was not found in set: "${this.value}"`),console.info(`${n} Will set value to either minimum or if not provided to "${this._items[0]}".`),this.value=this._items[0]),this.min===void 0&&(this.roundtrip||(console.warn(`${n} Expected a min value`),console.info(`${n} Will set min value to ${this._items[0]}`)),this.min=this._items[0]),this.max===void 0){let i=this.getLastStringItem();this.roundtrip||(console.warn(`${n} Expected a min value if roundtrip is enabled`),console.info(`${n} Will set min value to ${i}`)),this.max=i}}getLastStringItem(){return this._items[this._items.length-1]}getStringItems(){switch(this.type){case s.NUMBER:return console.warn(`${n}: unexpected type ${this.type}`),[];case s.LETTER:return b.alphabet;case s.CAPITAL_LETTER:return I.alphabet;case s.LOWER_LETTER:return v.alphabet;case s.CUSTOM:return this.items==null||this.items.length===0?(console.warn(`${n}: no items defined for type ${this.type}`),[]):this.items}}getItemIndexes(){switch(this.type){case s.NUMBER:return console.warn(`${n}: unexpected type ${this.type}`),{};case s.LETTER:return b.letterIndexes;case s.CAPITAL_LETTER:return I.letterIndexes;case s.LOWER_LETTER:return v.letterIndexes;case s.CUSTOM:return D(this._items)}}previousItem(){this.isNumber()?this.previousNumber():this.previousStringItem(),this.sixChange.emit(this.value)}previousNumber(){this.changeValue({isNextItemAllowed:()=>!this.isPreviousNumberDisabled(),getNextItem:()=>Number(this.value)-this.step,getRoundtripItem:()=>Number(this.max),isRoundtripPossible:()=>this.max===void 0&&this.roundtrip})}previousStringItem(){let e=String(this.value),i=String(this.min);this.changeValue({isNextItemAllowed:()=>i===void 0||this.getStringItemIndex(e)>this.getStringItemIndex(i),getNextItem:()=>this.getNextItemByOperation(f),getRoundtripItem:()=>String(this.max),isRoundtripPossible:()=>this.max==null&&this.roundtrip})}nextItem(){this.isNumber()?this.nextNumber():this.nextStringItem(),this.sixChange.emit(this.value)}nextNumber(){this.changeValue({isNextItemAllowed:()=>!this.isNextNumberDisabled(),getNextItem:()=>Number(this.value)+this.step,getRoundtripItem:()=>Number(this.min),isRoundtripPossible:()=>this.min===void 0&&this.roundtrip})}getStringItemIndex(e){return this._itemIndexes[e]}nextStringItem(){let e=String(this.value),i=String(this.max);this.changeValue({isNextItemAllowed:()=>i===void 0||this.getStringItemIndex(e)<this.getStringItemIndex(i),getNextItem:()=>this.getNextItemByOperation(_),getRoundtripItem:()=>String(this.min),isRoundtripPossible:()=>this.min===void 0&&this.roundtrip})}getNextItemByOperation(e,i=this.step){let N=String(this.value),S=e(this.getStringItemIndex(N),i),h=this._items.length,E=(S%h+h)%h;return this._items[E]}changeValue(e){if(e.isNextItemAllowed()){this.value=e.getNextItem();return}if(e.isRoundtripPossible()){console.error(`${n} Item picker is expected to perform a roundtrip, but either max or min value is missing so a roundtrip is not possible`);return}if(this.roundtrip){this.value=e.getRoundtripItem();return}console.warn(`${n} Roundtrip is not allowed, but was still triggered, please report this issue to the developer of six-item-picker`),this.sixChange.emit(this.value)}isNumber(){return this.type===s.NUMBER}isInvalidNumber(){return this.value===""||isNaN(this.value)}isNextDisabled(){return this.roundtrip?!1:this.isNumber()?this.isNextNumberDisabled():this._itemIndexes[String(this.value)]+this.step>this._itemIndexes[String(this.max)]}isNextNumberDisabled(){var e;return Number(this.value)+this.step>Number((e=this.max)!==null&&e!==void 0?e:1/0)}isPrevDisabled(){return this.roundtrip?!1:this.isNumber()?this.isPreviousNumberDisabled():this._itemIndexes[String(this.value)]-this.step<this._itemIndexes[String(this.min)]}isPreviousNumberDisabled(){var e;return Number(this.value)-this.step<Number((e=this.min)!==null&&e!==void 0?e:-1/0)}onMouseDownNext(){this.isNextDisabled()||(this.nextItem(),this._timeoutNext=setTimeout(()=>{this._intervalNext=setInterval(()=>{this.nextItem()},this.interval)},this.timeout))}onMouseUpNext(){clearTimeout(this._timeoutNext),clearInterval(this._intervalNext)}onMouseDownPrev(){this.isPrevDisabled()||(this.previousItem(),this._timeoutPrev=setTimeout(()=>{this._intervalPrev=setInterval(()=>{this.previousItem()},this.interval)},this.timeout))}onMouseUpPrev(){clearTimeout(this._timeoutPrev),clearInterval(this._intervalPrev)}getFormattedValue(){return this.value===void 0||this.value===null?this.value:this.padded?this.paddingDirection===o.BEFORE?String(this.value).padStart(this.paddingLength,this.paddingChar):this.paddingDirection===o.AFTER?String(this.value).padEnd(this.paddingLength,this.paddingChar):this.value:this.value}handleKeyPress(e){e.key==="Enter"?(e.preventDefault(),e.target===this.upButton?this.nextItem():e.target===this.downButton&&this.previousItem()):e.key==="ArrowUp"?(e.preventDefault(),this.nextItem()):e.key==="ArrowDown"?(e.preventDefault(),this.previousItem()):e.key==="PageUp"?(e.preventDefault(),this.pageUp()):e.key==="PageDown"?(e.preventDefault(),this.pageDown()):e.key==="Home"?(e.preventDefault(),this.goToMin()):e.key==="End"&&(e.preventDefault(),this.goToMax())}pageUp(){if(this.isNumber())this.changeValue({isNextItemAllowed:()=>!this.isNextNumberDisabled(),getNextItem:()=>Number(this.value)+5*this.step,getRoundtripItem:()=>Number(this.min),isRoundtripPossible:()=>this.min===void 0&&this.roundtrip});else{let e=String(this.value),i=String(this.min);this.changeValue({isNextItemAllowed:()=>i===void 0||this.getStringItemIndex(e)>this.getStringItemIndex(i),getNextItem:()=>this.getNextItemByOperation(_,5),getRoundtripItem:()=>String(this.min),isRoundtripPossible:()=>this.min===void 0&&this.roundtrip})}}pageDown(){if(this.isNumber())this.changeValue({isNextItemAllowed:()=>!this.isPreviousNumberDisabled(),getNextItem:()=>Number(this.value)-5*this.step,getRoundtripItem:()=>Number(this.max),isRoundtripPossible:()=>this.max===void 0&&this.roundtrip});else{let e=String(this.value),i=String(this.max);this.changeValue({isNextItemAllowed:()=>i===void 0||this.getStringItemIndex(e)<this.getStringItemIndex(i),getNextItem:()=>this.getNextItemByOperation(f,5),getRoundtripItem:()=>String(this.max),isRoundtripPossible:()=>this.max==null&&this.roundtrip})}}goToMin(){var e;this.isNumber()?this.value=(e=this.min)!==null&&e!==void 0?e:0:this.value=this._items[0],this.sixChange.emit(this.value)}goToMax(){var e;this.isNumber()?this.value=(e=this.max)!==null&&e!==void 0?e:1/0:this.value=this.getLastStringItem(),this.sixChange.emit(this.value)}render(){return r("div",{key:"9696809f37fa9db9f3b3212ea6c21cccb648ccab",part:"container",class:"item_picker__container",onKeyDown:e=>this.handleKeyPress(e),tabindex:"0"},r("div",{key:"5864af2b6f193d090e3411c8cd54842f58fe6609",ref:e=>this.upButton=e,part:"up",class:{item_picker__btn:!0,"item_picker__btn--disabled":this.isNextDisabled()},onMouseDown:()=>this.onMouseDownNext(),onMouseUp:()=>this.onMouseUpNext(),tabindex:"-1"},r("six-icon",{key:"37ac08eea928d8eaa2b3113879bd48a422261bb2",size:"large"},"expand_less")),r("div",{key:"54948f29b05477d73228d00825c0b10b2f62d8bb",part:"content",class:"item_picker__content"},this.getFormattedValue()),r("div",{key:"911a69c54e9151dd508d962867642e38eb8f0652",ref:e=>this.downButton=e,part:"down",class:{item_picker__btn:!0,"item_picker__btn--disabled":this.isPrevDisabled()},onMouseDown:()=>this.onMouseDownPrev(),onMouseUp:()=>this.onMouseUpPrev(),tabindex:"-1"},r("six-icon",{key:"86785c1389e748d3a3c54dd09d5b8fc892882ee8",size:"large"},"expand_more")))}get host(){return p(this)}static get watchers(){return{value:["handleValueChange"],debounce:["debounceChanged"],items:["handleSetChange"]}}};return t.style=k,t})();export{T as six_item_picker};
