import{c as u}from"./chunk-3U4L26XT.js";import{c as b,d as h,g as d}from"./chunk-5JITBAN6.js";var v=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:border-box}.sr-only{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}:host{display:block;height:100%}.sidebar__container{height:100%;overflow:auto}.sidebar__container.sidebar--open{border-right:1px solid var(--six-color-web-rock-300)}.sidebar__container:not(.sidebar--visible){position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;pointer-events:none;visibility:hidden}.sidebar--left{color:var(--six-sidebar-color);background-color:var(--six-sidebar-background-color);transition:var(--six-transition-medium) margin-left;background-size:300vw 70%;background-position:bottom;background-repeat:no-repeat}.sidebar--right{transition:var(--six-transition-medium) margin-right}.sidebar--open.sidebar--left{margin-right:2px}.sidebar--open.sidebar--right{margin-left:2px}",p=l=>{var e;return((e=l?.tagName)===null||e===void 0?void 0:e.toLowerCase())==="six-sidebar-item-group"},m=(()=>{let l=class{constructor(e){b(this,e),this.sixShow=d(this,"six-sidebar-show"),this.sixAfterShow=d(this,"six-sidebar-after-show"),this.sixHide=d(this,"six-sidebar-hide"),this.sixAfterHide=d(this,"six-sidebar-after-hide"),this.sixInitialFocus=d(this,"six-sidebar-initial-focus"),this.willShow=!1,this.willHide=!1,this.isVisible=!1,this.position="left",this.open=!1,this.width="16rem",this.toggled=!1,this.handleTransitionEnd=s=>{let t=s.target;s.type==="transitionend"&&t.classList.contains("sidebar__container")&&this.resetTransitionVariables()},this.closeSiblingDetailsOnShow=s=>{let t=s.target;this.sidebar!=null&&u(t,this.sidebar);let n=i=>{var o;let r=t;for(;i(r)!=null;)if(r=i(r),p(r)){let a=(o=r?.shadowRoot)===null||o===void 0?void 0:o.querySelector("six-details");a!=null&&(a.open=!1)}};n(i=>i?.previousElementSibling),n(i=>i?.nextElementSibling)}}handleOpenChange(){this.open?this.show():this.hide()}componentWillLoad(){this.open&&(this.show(),this.resetTransitionVariables())}componentDidRender(){this.setupTogglableMenuItems()}disconnectedCallback(){var e;(e=this.sidebar)===null||e===void 0||e.removeEventListener("six-details-show",this.closeSiblingDetailsOnShow)}setupTogglableMenuItems(){!this.toggled||this.sidebar==null||(this.markAllMenuItemsAsSelectableEmpty(),this.sidebar.addEventListener("six-details-show",this.closeSiblingDetailsOnShow))}markAllMenuItemsAsSelectableEmpty(){var e;let s=(e=this.sidebar)===null||e===void 0?void 0:e.querySelector("slot"),t=s?.assignedElements()||[],n=[];for(;t.length>0;){let i=t.pop();if(i?.shadowRoot==null)continue;let o=i.shadowRoot.querySelectorAll("six-details");n.push(...o);let r=Array.from(i.children).filter(p);t.push(...r)}n.forEach(i=>i.selectableEmpty=!0)}async toggle(){this.willShow||this.willHide||(this.open?await this.hide():await this.show())}async show(){if(this.willShow)return;if(this.sixShow.emit().defaultPrevented){this.open=!1;return}this.willShow=!0,this.isVisible=!0,this.open=!0}async hide(){if(this.willHide)return;if(this.sixHide.emit().defaultPrevented){this.open=!0;return}this.willHide=!0,this.open=!1}async selectItemByIndex(e){if(this.sidebar==null)return;let s=this.sidebar.querySelector("slot"),t=(s?.assignedElements()||[]).flatMap(n=>{var i;let o=(i=n.shadowRoot)===null||i===void 0?void 0:i.querySelector("six-details");return o==null?[]:[o]});if(e<0||e>t.length-1){console.error(`Tried to access sidebar menu item by index, but provided index out of range. Provided index: ${e}`);return}await t[e].show()}async selectItemByName(e){var s,t,n;let i=(s=this.sidebar)===null||s===void 0?void 0:s.querySelector("slot"),o=i?.assignedElements();if(o==null)return;let r=o.findIndex(c=>c?.name===e),a=(n=(t=o.at(r))===null||t===void 0?void 0:t.shadowRoot)===null||n===void 0?void 0:n.querySelector("six-details");await a?.show()}resetTransitionVariables(){this.isVisible=this.open,this.willShow=!1,this.willHide=!1,this.open?this.sixAfterShow.emit():this.sixAfterHide.emit()}render(){return h("host",{key:"1aae217047bea8e29e86256812a8a67a6eff4ce9",class:"six-sidebar"},h("div",{key:"d9d70f022ffaeae09003dfc130b40707ad9e3512",class:{sidebar__container:!0,"sidebar--visible":this.isVisible,"sidebar--open":this.open,"sidebar--left":this.position==="left","sidebar--right":this.position==="right"},style:{width:this.width,[`margin-${this.position}`]:this.open?"0":`calc(1rem - ${this.width})`},ref:e=>this.sidebar=e,"aria-hidden":this.open?"false":"true",onTransitionEnd:this.handleTransitionEnd},h("slot",{key:"d88754017cf07b12181cce2e10788291ad487257"})))}static get watchers(){return{open:["handleOpenChange"]}}};return l.style=v,l})();export{m as six_sidebar};
