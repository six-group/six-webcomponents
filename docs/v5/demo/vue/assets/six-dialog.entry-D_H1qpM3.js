import{r as l,c as a,h as e,g as n}from"./index-DLKAdVU4.js";import{u as o,l as r}from"./scroll-BY6hIEFX-ClmLlG2x.js";import{h as d}from"./slot-j3oIB5oT-DHCS1GYw.js";import{M as h}from"./modal-CfIoyvm--CATy1Ets.js";import{a as c}from"./animation-SLlDVtvF-BgOpgORN.js";const p=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:border-box}.sr-only{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}:host{--width:31rem;display:contents}.dialog{display:flex;align-items:center;justify-content:center;position:fixed;top:0;right:0;bottom:0;left:0;z-index:var(--six-z-index-dialog);color:var(--six-color-web-rock-900)}.dialog:not(.dialog--visible){position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;pointer-events:none;visibility:hidden}.dialog__panel{display:flex;flex-direction:column;z-index:2;width:var(--width);max-width:calc(100% - var(--six-spacing-xx-large));max-height:calc(100% - var(--six-spacing-xx-large));background-color:var(--six-panel-background-color);border-radius:var(--six-border-radius-medium);box-shadow:var(--six-shadow-large);opacity:0;transform:scale(0.8);transition:var(--six-transition-medium) opacity, var(--six-transition-medium) transform}.dialog__panel:focus{outline:none}@media screen and (max-width: 420px){.dialog__panel{max-height:80vh}}.dialog--open .dialog__panel{display:flex;opacity:1;transform:none}.dialog__header{flex:0 0 auto;display:flex}.dialog__title{flex:1 1 auto;font-size:var(--six-font-size-x-large);font-weight:var(--six-font-weight-bold);line-height:var(--six-line-height-dense);padding:var(--six-spacing-large) var(--six-spacing-large) var(--six-spacing-small)}.dialog__close{flex:0 0 auto;display:flex;align-items:center;font-size:var(--six-font-size-x-large);padding:0 var(--six-spacing-x-small)}.dialog__body{flex:1 1 auto;padding:var(--six-spacing-small) var(--six-spacing-large) var(--six-spacing-large);overflow:auto;-webkit-overflow-scrolling:touch}.dialog__footer{flex:0 0 auto;text-align:right;padding:var(--six-spacing-large)}.dialog__footer ::slotted(six-button:not(:first-of-type)){margin-left:var(--six-spacing-xx-small)}.dialog:not(.dialog--has-footer) .dialog__footer{display:none}.dialog__overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:var(--six-overlay-background-color);opacity:0;transition:var(--six-transition-medium) opacity}.dialog--open .dialog__overlay{opacity:0.8}";let f=0;const g=class{constructor(i){l(this,i),this.sixShow=a(this,"six-dialog-show"),this.sixAfterShow=a(this,"six-dialog-after-show"),this.sixHide=a(this,"six-dialog-hide"),this.sixAfterHide=a(this,"six-dialog-after-hide"),this.sixInitialFocus=a(this,"six-dialog-initial-focus"),this.sixRequestClose=a(this,"six-dialog-request-close"),this.componentId=`dialog-${++f}`,this.willShow=!1,this.willHide=!1,this.hasFooter=!1,this.isVisible=!1,this.open=!1,this.label="",this.noHeader=!1,this.handleCloseClick=()=>{this.preventClose("close-button")},this.handleKeyDown=t=>{t.key==="Escape"&&this.preventClose("keyboard")},this.handleOverlayClick=()=>{this.preventClose("overlay")},this.handleSlotChange=()=>{this.hasFooter=d(this.host,"footer")},this.handleTransitionEnd=t=>{const s=t.target;t.propertyName==="opacity"&&s.classList.contains("dialog__panel")&&(this.isVisible=this.open,this.willShow=!1,this.willHide=!1,this.open?this.sixAfterShow.emit():this.sixAfterHide.emit())}}handleOpenChange(){this.open?this.show():this.hide()}connectedCallback(){this.modal=new h(this.host,{onFocusOut:()=>{var i;return(i=this.panel)===null||i===void 0?void 0:i.focus()}})}componentWillLoad(){this.handleSlotChange()}componentDidLoad(){this.open&&this.show()}disconnectedCallback(){o(this.host)}async show(){if(this.willShow||this.modal==null||this.panel==null||this.dialog==null)return;const i=this.panel;if(this.sixShow.emit().defaultPrevented){this.open=!1;return}this.willShow=!0,this.isVisible=!0,this.open=!0,this.modal.activate(),r(this.host),this.open&&requestAnimationFrame(()=>{this.sixInitialFocus.emit().defaultPrevented||i.focus({preventScroll:!0})})}async hide(){if(this.willHide||this.modal==null)return;if(this.sixHide.emit().defaultPrevented){this.open=!0;return}this.willHide=!0,this.open=!1,this.modal.deactivate(),o(this.host)}preventClose(i){if(this.sixRequestClose.emit({source:i}).defaultPrevented&&this.panel){c(this.panel,[{scale:1},{scale:1.01},{scale:1}],{duration:250});return}this.hide()}render(){return e("div",{key:"b97915d5076bb83782212b61b1f65f694fd84b63",ref:i=>this.dialog=i,part:"base",class:{dialog:!0,"dialog--open":this.open,"dialog--visible":this.isVisible,"dialog--has-footer":this.hasFooter},onKeyDown:this.handleKeyDown,onTransitionEnd:this.handleTransitionEnd},e("div",{key:"153379e70061e86842f65f3588329dc9c6d592db",part:"overlay",class:"dialog__overlay",onClick:this.handleOverlayClick}),e("div",{key:"d0b78c413a70eeb6e6cbf75be7829a7d1f2ad715",ref:i=>this.panel=i,part:"panel",class:"dialog__panel",role:"dialog","aria-modal":"true","aria-hidden":this.open?"false":"true","aria-label":this.noHeader?this.label:null,"aria-labelledby":this.noHeader?null:`${this.componentId}-title`,tabIndex:0},!this.noHeader&&e("header",{key:"94e7d993356ea718e1ed87d4fe9e1d3faf0574f8",part:"header",class:"dialog__header"},e("span",{key:"600591c9266dda80c457f41c54c92a8134d89bb8",part:"title",class:"dialog__title",id:`${this.componentId}-title`},e("slot",{key:"4ad2904648821134ce3851682768b01086a68359",name:"label"},this.label||"\uFEFF")),e("six-icon-button",{key:"4d793b14b41f7d9c43d5f9949cba6bfe7c6a442c",exportparts:"base:close-button",class:"dialog__close",name:"close",onClick:this.handleCloseClick})),e("div",{key:"729f6cc36802fccf46958b2c259213aa9369fb94",part:"body",class:"dialog__body"},e("slot",{key:"ba299ae12ba958c705a807639aee911167997b38"})),e("footer",{key:"92cb57fa4c4dc066a49dd259832e43be619cc945",part:"footer",class:"dialog__footer"},e("slot",{key:"63ea68abef52d91c04608ad1bf6d508a31012ed9",name:"footer",onSlotchange:this.handleSlotChange}))))}get host(){return n(this)}static get watchers(){return{open:["handleOpenChange"]}}};g.style=p;export{g as six_dialog};
