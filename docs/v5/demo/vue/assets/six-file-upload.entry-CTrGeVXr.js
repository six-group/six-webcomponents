import{r as d,c as r,h as s,g as n}from"./index-BAR7CAA3.js";import{h as p}from"./slot-j3oIB5oT-DHCS1GYw.js";const c=".sc-six-file-upload-h{position:relative;box-sizing:border-box}.sc-six-file-upload-h *.sc-six-file-upload,.sc-six-file-upload-h *.sc-six-file-upload:before,.sc-six-file-upload-h *.sc-six-file-upload:after{box-sizing:border-box}.sr-only.sc-six-file-upload{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.sc-six-file-upload-h{position:static;display:block}.six-file-upload.sc-six-file-upload six-card.sc-six-file-upload{box-shadow:none;padding:0;width:100%}.six-file-upload__label--highlighted.sc-six-file-upload{color:var(--six-color-action-600)}.six-file-upload__container--full.sc-six-file-upload{border:dashed 1px var(--six-color-web-rock-500)}.six-file-upload__drop-zone.sc-six-file-upload{padding:2rem 0;display:flex;justify-content:center;width:100%;transition:background-color 0.3s}.six-file-upload__drop-zone__spinner-container.sc-six-file-upload{display:flex;align-items:center}.six-file-upload__drop-zone__spinner-container.sc-six-file-upload six-spinner.sc-six-file-upload{margin-right:var(--six-spacing-x-small)}.six-file-upload__drop-zone--compact.sc-six-file-upload{padding:0}.six-file-upload__input.sc-six-file-upload{cursor:pointer;position:absolute;top:0;left:0;width:100%;user-select:none;height:100%;opacity:0;outline:none}.six-file-upload--disabled.sc-six-file-upload .six-file-upload__drop-zone.sc-six-file-upload{background-color:var(--six-color-inactive);cursor:not-allowed}.six-file-upload.sc-six-file-upload:not(.six-file-upload--disabled) .six-file-upload__drop-zone.sc-six-file-upload:hover,.six-file-upload__drop-zone--hover.sc-six-file-upload{background-color:var(--six-color-action-light-to-be-defined)}.six-file-upload.sc-six-file-upload:not(.six-file-upload--disabled) .six-file-upload__drop-zone.sc-six-file-upload:hover.six-file-upload__drop-zone--compact,.six-file-upload__drop-zone--hover.six-file-upload__drop-zone--compact.sc-six-file-upload{background-color:inherit}.six-file-upload--disabled.sc-six-file-upload .six-file-upload__input.sc-six-file-upload{cursor:not-allowed}.six-file-upload__error-text.sc-six-file-upload{font-size:var(--six-input-help-text-font-size-medium)}",h=class{constructor(i){d(this,i),this.success=r(this,"six-file-upload-success"),this.failure=r(this,"six-file-upload-failure"),this.isOver=!1,this.hasError=!1,this.compact=!1,this.disabled=!1,this.multiple=!1,this.uploading=!1,this.errorText="",this.invalid=!1,this.handleSlotChange=()=>{let e=!1;this.errorText!=null&&(typeof this.errorText=="string"&&this.errorText.trim().length>0||typeof this.errorText=="object"&&this.errorText.length>0)&&(e=!0),this.hasError=e||p(this.host,"error-text")},this.handleFiles=e=>{if(!(this.disabled||e.length===0||this.uploading)){if(!this.multiple&&e.length>1)return this.failure.emit({reason:"Only one file is allowed.",code:"ONLY_ONE_FILE_ALLOWED"});for(const l of e){if(l==null)return;let o=[];if(this.accept!=null&&(o=this.accept.replace(/\s/g,"").split(",")),o.length>0&&o.indexOf(l.type)===-1){const a=e.length>1?"One or more files have invalid MIME type.":"File has invalid MIME type.",t=e.length>1?"ONE_OR_MORE_FILES_HAVE_INVALID_MIME_TYPE":"INVALID_MIME_TYPE";return this.failure.emit({reason:a,code:t})}if(this.maxFileSize!=null&&l.size>this.maxFileSize){const a=e.length>1?"One or more files are too big":"File is too big.",t=e.length>1?"ONE_OR_MULTIPLE_FILES_TOO_BIG":"FILE_TOO_BIG";return this.failure.emit({reason:a,code:t})}}this.success.emit({files:e})}},this.onChange=()=>{var e;if(((e=this.fileInput)===null||e===void 0?void 0:e.files)!=null){const l=this.fileInput.files;this.handleFiles(l),this.fileInput.value=""}}}dragenterHandler(){this.disabled||(this.isOver=!0)}dragoverHandler(){this.disabled||(this.isOver=!0)}dragleaveHandler(){this.disabled||(this.isOver=!1)}dropHandler(i){var e;this.disabled||(this.isOver=!1,!((e=i.dataTransfer)===null||e===void 0)&&e.files&&this.handleFiles(i.dataTransfer.files))}componentWillLoad(){this.handleSlotChange()}componentDidLoad(){var i;["dragenter","dragover","dragleave","drop"].forEach(e=>{this.host.addEventListener(e,this.preventDefaults,!1),document.body.addEventListener(e,this.preventDefaults,!1)}),(i=this.host.shadowRoot)===null||i===void 0||i.addEventListener("slotchange",this.handleSlotChange)}disconnectedCallback(){var i;["dragenter","dragover","dragleave","drop"].forEach(e=>{this.host.removeEventListener(e,this.preventDefaults,!1),document.body.removeEventListener(e,this.preventDefaults,!1)}),(i=this.host.shadowRoot)===null||i===void 0||i.removeEventListener("slotchange",this.handleSlotChange)}preventDefaults(i){i.preventDefault(),i.stopPropagation()}renderLabel(){var i;return(i=this.label)!==null&&i!==void 0?i:this.compact?"Upload":s("span",null,"Drop files to upload, or ",s("span",{class:"six-file-upload__label--highlighted"},"browse"))}render(){const i=this.compact?"six-button":"six-card",e=(Array.isArray(this.errorText)?this.errorText:[this.errorText]).filter(l=>l!=null&&l.trim()!=="");return s("div",{key:"22f6273a8a3ff2134c570ea91e92a78039f69de9",class:{"six-file-upload":!0,"six-file-upload--disabled":this.disabled||this.uploading}},s(i,{key:"c0978b21b218b9b8d251a98b6e52838029ca074a",disabled:this.disabled||this.uploading,"aria-invalid":this.invalid?"true":"false",class:{"six-file-upload__container--compact":this.compact,"six-file-upload__container--full":!this.compact}},this.compact&&!this.uploading&&s("six-icon",{key:"f1dcea5ddeab7fbf0eeea7af62cf8483f136a1c6",slot:"prefix"},"arrow_circle_up"),s("div",{key:"e166e39e3d4215de356d59fc3497191ba39e774f",class:{"six-file-upload__drop-zone":!0,"six-file-upload__drop-zone--hover":this.isOver,"six-file-upload__drop-zone--compact":this.compact}},this.uploading?s("span",{class:"six-file-upload__drop-zone__spinner-container"},s("six-spinner",null)," Uploading..."):s("div",null,s("span",null,this.renderLabel()),s("input",{class:"six-file-upload__input",type:"file",name:"resume",disabled:this.disabled,accept:this.accept,multiple:this.multiple,onChange:this.onChange,ref:l=>this.fileInput=l})))),s("div",{key:"03cdbd08cd58667b279e0b5b961f88661125cf7d","aria-hidden":this.invalid?"false":"true"},s("slot",{key:"b022f0aa0ce0964da126a4484984553dd73d9094",name:"error-text"},e.map(l=>s("six-error",null,s("div",{class:"six-file-upload__error-text"},l))))))}get host(){return n(this)}};h.style=c;export{h as six_file_upload};
